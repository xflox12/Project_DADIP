{% extends "layouts/base.html" %}
<!-- Authors: Florian, Marco, Julia, Sophie -->
{% block title %} Project DADIP {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<div class="content">
    <div class="panel-header bg-primary-gradient">
        <div class="page-inner py-5">
            <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row">
                <div>
                    <h2 class="text-white pb-2 fw-bold">Welcome to DADIP!</h2>
                    <h5 class="text-white op-7 mb-2">Start right away and let us check your Data for possible Fraud by
                        clicking the Button:</h5>
                </div>
                <div class="ml-md-auto py-2 py-md-0">
                    <!-- Additional button if needed: -->
                    <!-- <a href="#" class="btn btn-white btn-border btn-round mr-2">Manage</a> -->
                    <a href="{% url 'fileimport' %}" class="btn btn-secondary btn-round">Upload File</a>
                </div>
            </div>
        </div>
    </div>

    <!--Some Space-->
    <div class="page-inner mt--5">
        <div class="row">
            <p> <br></p>
        </div>
    </div>


    <!--Last Usage Information -->
    <div class="page-inner mt--5">
        <div class="row">
            <div class="col-md-4">
                <div class="card card-primary bg-primary-gradient">
                    <div class="card-body">
                        <h3 class="mt-3 b-b1 pb-2 mb-4 fw-bold">Last Fraud Check was:</h3>
                        <h4 class="mb-4 fw-bold">{{datetime_last_analysis}}</h4>
                        <br>
                        <h3 class="mt-3 b-b1 pb-2 mb-4 fw-bold">The analysed File was:</h3>
                        <h4 class="mb-4 fw-bold">{{last_analysis_table}}</h4>
                        <!--<div id="activeUsersChart"></div>-->
                        <br>
                        <h3 class="mt-3 b-b1 pb-2 mb-4 fw-bold">Output of Analysis</h3>
                        <ul class="list-unstyled">
                            <li class="d-flex justify-content-between pb-1 pt-1"><small>Amount of detected
                                Fraud:</small>
                                <span>{{count_fraud}}</span></li>
                            <li class="d-flex justify-content-between pb-1 pt-1"><small>Amount of Non-Fraud
                                Data:</small>
                                <span>{{count_nonfraud}}</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!--Factsheet-->
            <div class="col-md-6">
                <div class="card full-height">
                    <div class="card-body">
                        <div class="card-title">Overall statistics</div>
                        <!--<div class="card-category">Daily statistic information</div>-->
                        <div class="d-flex flex-wrap justify-content-around pb-2 pt-4">
                            <div class="px-2 pb-2 pb-md-0 text-center">
                                <div id="circles-1"></div>
                                <h6 class="fw-bold mt-3 mb-0">Detected Frauds</h6>
                            </div>
                            <div class="px-2 pb-2 pb-md-0 text-center">
                                <div id="circles-2"></div>
                                <h6 class="fw-bold mt-3 mb-0">Registered Users</h6>
                            </div>
                            <div class="px-2 pb-2 pb-md-0 text-center">
                                <div id="circles-3"></div>
                                <h6 class="fw-bold mt-3 mb-0">Number of uploaded Datasets</h6>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>


        <br>
        <br>


        <!-- Instructions -->
        <div class="page-inner mt--5">
            <h4 class="page-title">How to use DADIP:</h4>
        </div>
        <div class="page-inner mt--5">
            <div class="row">
                <div class="col-md-12">

                    <ul class="timeline">
                        <li>
                            <div class="timeline-badge info">
                                <h1>1</h1>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4 class="timeline-title">Step 1:</h4>
                                </div>
                                <div class="timeline-body">
                                    <p>Upload your file (xlsx or csv) via "File Upload" in the navigation bar or click
                                        <a href="{% url 'fileimport' %}">here</a>.</p>
                                </div>
                            </div>
                        </li>
                        <li class="timeline-inverted">
                            <div class="timeline-badge info">
                                <h1>2</h1>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4 class="timeline-title">Step 2</h4>
                                </div>
                                <div class="timeline-body">
                                    <p><span class="text">After the upload your submitted data will be displayed.</span>
                                        <br class="text">There will be an extra row beneath the column names which
                                        represents the detected Datatypes of each column. If everything is in order, you
                                        can save the data to the database by clicking on "Save Data to Database".</br>
                                        <br class="text">If you would like to make any adjustments click on "Change
                                        Datatypes" and select the appropriate datatype via dropdown selection.
                                        Afterwards confirm your selection by clicking on "Save Datatypes" and finally
                                        save the data to the database by clicking on "Save Data to Database".</br></p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="timeline-badge info">
                                <h1>3</h1>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4 class="timeline-title">Step 3:</h4>
                                </div>
                                <div class="timeline-body">
                                    <p><span class="text">The next step is to either train the model or use your uploaded data to get a prediction about possible fraud cases. </span>
                                        <br>
                                        <br class="text">First choose the dataframe you would like to use via dropdown
                                        selection.
                                        <br>
                                        <br class="text">If the dataframe contains labeled data you can click on the
                                        button "Train Model and Analyse Data" to first train the model and afterwards
                                        get a prediction of possible fraud cases for the chosen dataframe.</br>
                                        <br class="text">If you have unlabeled data you can click on "Analyse Dataframe"
                                        to get a prediction for your data.
                                        Note: The prediction will only work if the model has been trained before and a
                                        trained model already exists! </br></p>
                                </div>
                            </div>
                        </li>

                        <li class="timeline-inverted">
                            <div class="timeline-badge info">
                                <h1>4</h1>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4 class="timeline-title">Step 4:</h4>
                                </div>
                                <div class="timeline-body">
                                    <p>Click on "Data Visualization" to get a graphical representation of the
                                        prediction.</p>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<!-- Atlantis DEMO methods, don't include it in your project! -->
<script src="/static/assets/js/setting-demo.js"></script>
<script src="/static/assets/js/demo.js"></script>

<script>
    Circles.create({
        id: 'circles-1',
        radius: 45,
        value: 60,
        maxValue: 100,
        width: 7,
        text: '{{ count_fraud }}',
        colors: ['#f1f1f1', '#FF9E27'],
        duration: 400,
        wrpClass: 'circles-wrp',
        textClass: 'circles-text',
        styleWrapper: true,
        styleText: true
    })

    Circles.create({
        id: 'circles-2',
        radius: 45,
        value: 70,
        maxValue: 100,
        width: 7,
        text: '{{ registered_users }}',
        colors: ['#f1f1f1', '#2BB930'],
        duration: 400,
        wrpClass: 'circles-wrp',
        textClass: 'circles-text',
        styleWrapper: true,
        styleText: true
    })

    Circles.create({
        id: 'circles-3',
        radius: 45,
        value: 40,
        maxValue: 100,
        width: 7,
        text: '{{ number_of_datasets }}',
        colors: ['#f1f1f1', '#F25961'],
        duration: 400,
        wrpClass: 'circles-wrp',
        textClass: 'circles-text',
        styleWrapper: true,
        styleText: true
    })

</script>

{% endblock javascripts %}



